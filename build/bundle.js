var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function n(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,s,n){e.$$.on_destroy.push(function(e,...s){if(null==e)return t;const n=e.subscribe(...s);return n.unsubscribe?()=>n.unsubscribe():n}(s,n))}function c(t,e){t.appendChild(e)}function a(t,e,s){t.insertBefore(e,s||null)}function l(t){t.parentNode.removeChild(t)}function d(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function h(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function p(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function g(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,s){null==s?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,s,n){t.style.setProperty(e,s,n?"important":"")}let w;function A(t){w=t}function T(){if(!w)throw new Error("Function called outside component initialization");return w}const E=[],b=[],y=[],$=[],D=Promise.resolve();let L=!1;function O(t){y.push(t)}let S=!1;const C=new Set;function K(){if(!S){S=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];A(e),R(e.$$)}for(E.length=0;b.length;)b.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];C.has(e)||(C.add(e),e())}y.length=0}while(E.length);for(;$.length;)$.pop()();L=!1,S=!1,C.clear()}}function R(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const M=new Set;let k;function N(){k={r:0,c:[],p:k}}function I(){k.r||n(k.c),k=k.p}function _(t,e){t&&t.i&&(M.delete(t),t.i(e))}function F(t,e,s,n){if(t&&t.o){if(M.has(t))return;M.add(t),k.c.push(()=>{M.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}}function P(t){t&&t.c()}function H(t,s,o){const{fragment:i,on_mount:c,on_destroy:a,after_update:l}=t.$$;i&&i.m(s,o),O(()=>{const s=c.map(e).filter(r);a?a.push(...s):n(s),t.$$.on_mount=[]}),l.forEach(O)}function j(t,e){const s=t.$$;null!==s.fragment&&(n(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(E.push(t),L||(L=!0,D.then(K)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,r,o,i,c,a,d=[-1]){const h=w;A(e);const u=r.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:s(),dirty:d};let p=!1;if(f.ctx=o?o(e,u,(t,s,...n)=>{const r=n.length?n[0]:s;return f.ctx&&c(f.ctx[t],f.ctx[t]=r)&&(f.bound[t]&&f.bound[t](r),p&&B(e,t)),s}):[],f.update(),p=!0,n(f.before_update),f.fragment=!!i&&i(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(l)}else f.fragment&&f.fragment.c();r.intro&&_(e.$$.fragment),H(e,r.target,r.anchor),K()}A(h)}class J{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(){}}const X=[];function U(e,s=t){let n;const r=[];function i(t){if(o(e,t)&&(e=t,n)){const t=!X.length;for(let t=0;t<r.length;t+=1){const s=r[t];s[1](),X.push(s,e)}if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,c=t){const a=[o,c];return r.push(a),1===r.length&&(n=s(i)||t),o(e),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(n(),n=null)}}}}const Q=new class{constructor(){const{subscribe:t,set:e,update:s}=U([]);this.subscribe=t,this.set=e,this.update=s}addFiles(t){this.update(()=>t)}};function V(e){let s,r,o,i,d;return{c(){s=h("div"),r=u("Drop area"),m(s,"class",o=(e[0]?"highlight":"")+" dropzone svelte-1sa4s83")},m(t,n){a(t,s,n),c(s,r),i||(d=[p(s,"dragenter",g(e[2])),p(s,"dragleave",g(e[3])),p(s,"dragover",g(e[1])),p(s,"drop",g(e[4]))],i=!0)},p(t,[e]){1&e&&o!==(o=(t[0]?"highlight":"")+" dropzone svelte-1sa4s83")&&m(s,"class",o)},i:t,o:t,d(t){t&&l(s),i=!1,n(d)}}}async function G(t){let e=[],s=await async function(t){return new Promise((e,s)=>{t.createReader().readEntries(t=>{e(t)},t=>{s(t)})})}(t);for(let t of s)if(t.isDirectory){let s=await G(t);e=e.concat(s)}else e=e.concat([t]);return e}function z(t,e,s){let n=!1;return[n,function(t){s(0,n=!0)},function(t){s(0,n=!0)},function(t){s(0,n=!1)},async function(t){s(0,n=!1);let e=[];for(let s of t.dataTransfer.items){let t=s.webkitGetAsEntry();if(t)if(t.isDirectory){let s=await G(t);e=e.concat(s)}else e=e.concat([t]);else console.log("error: not dropped",s,t)}Q.addFiles(e)}]}class q extends J{constructor(t){super(),W(this,t,z,V,o,{})}}function Y(t){let e;return{c(){e=h("div"),m(e,"class","flex-child svelte-157cix3"),x(e,"width",t[1]+"px")},m(t,s){a(t,e,s)},p(t,s){2&s&&x(e,"width",t[1]+"px")},d(t){t&&l(e)}}}function Z(t){let e,s,n,r=t[0].stack[0]+"";return{c(){e=h("div"),s=u(r),m(e,"class",n="flex-child "+t[0].state+" file-thread svelte-157cix3"),x(e,"width",t[2])},m(t,n){a(t,e,n),c(e,s)},p(t,o){1&o&&r!==(r=t[0].stack[0]+"")&&v(s,r),1&o&&n!==(n="flex-child "+t[0].state+" file-thread svelte-157cix3")&&m(e,"class",n)},d(t){t&&l(e)}}}function tt(e){let s;function n(t,e){return t[0]?Z:Y}let r=n(e),o=r(e);return{c(){o.c(),s=u("")},m(t,e){o.m(t,e),a(t,s,e)},p(t,[e]){r===(r=n(t))&&o?o.p(t,e):(o.d(1),o=r(t),o&&(o.c(),o.m(s.parentNode,s)))},i:t,o:t,d(t){o.d(t),t&&l(s)}}}function et(t,e,s){let{thread:n}=e,{maxWidth:r=100}=e,o=r+"px";return t.$set=t=>{"thread"in t&&s(0,n=t.thread),"maxWidth"in t&&s(1,r=t.maxWidth)},[n,r,o]}class st extends J{constructor(t){super(),W(this,t,et,tt,o,{thread:0,maxWidth:1})}}const nt=new class{constructor(){const{subscribe:t,set:e,update:s}=U({});this.subscribe=t,this.set=e,this.update=s}addThread(t,e){this.update(s=>{let n={},r={},o={};return o[e.name]=e,r[t.name]=Object.assign({},s[t.name],o),n=(s[t.name],Object.assign({},s,r)),n})}};function rt(t,e,s){const n=t.slice();return n[17]=e[s],n[16]=s,n}function ot(t,e,s){const n=t.slice();return n[14]=e[s],n[16]=s,n}function it(t,e,s){const n=t.slice();return n[17]=e[s],n[16]=s,n}function ct(t){let e,s,n=t[17]+"";return{c(){e=h("div"),s=u(n),m(e,"class","flex-child svelte-1sw8vp4"),x(e,"width",t[1]+"px")},m(t,n){a(t,e,n),c(e,s)},p(t,r){4&r&&n!==(n=t[17]+"")&&v(s,n),2&r&&x(e,"width",t[1]+"px")},d(t){t&&l(e)}}}function at(t){let e,s;return e=new st({props:{thread:t[5](t[17],t[14]),maxWidth:t[1]}}),{c(){P(e.$$.fragment)},m(t,n){H(e,t,n),s=!0},p(t,s){const n={};20&s&&(n.thread=t[5](t[17],t[14])),2&s&&(n.maxWidth=t[1]),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function lt(t){let e,s,n,r,o,i,p=t[14]+"",g=t[2],w=[];for(let e=0;e<g.length;e+=1)w[e]=at(rt(t,g,e));const A=t=>F(w[t],1,1,()=>{w[t]=null});return{c(){e=h("div"),s=h("div"),n=u(p),r=f();for(let t=0;t<w.length;t+=1)w[t].c();o=f(),m(s,"class","flex-child svelte-1sw8vp4"),x(s,"width",t[1]+"px"),m(e,"class","flex-container thread-row svelte-1sw8vp4")},m(t,l){a(t,e,l),c(e,s),c(s,n),c(e,r);for(let t=0;t<w.length;t+=1)w[t].m(e,null);c(e,o),i=!0},p(t,r){if((!i||16&r)&&p!==(p=t[14]+"")&&v(n,p),(!i||2&r)&&x(s,"width",t[1]+"px"),54&r){let s;for(g=t[2],s=0;s<g.length;s+=1){const n=rt(t,g,s);w[s]?(w[s].p(n,r),_(w[s],1)):(w[s]=at(n),w[s].c(),_(w[s],1),w[s].m(e,o))}for(N(),s=g.length;s<w.length;s+=1)A(s);I()}},i(t){if(!i){for(let t=0;t<g.length;t+=1)_(w[t]);i=!0}},o(t){w=w.filter(Boolean);for(let t=0;t<w.length;t+=1)F(w[t]);i=!1},d(t){t&&l(e),d(w,t)}}}function dt(t){let e,s,n,r,o,i,u,p,g,v,w,A,T,E,b,y,$,D,L,O,S,C,K,R,M,k;D=new q({});let B=t[2],W=[];for(let e=0;e<B.length;e+=1)W[e]=ct(it(t,B,e));let J=t[4],X=[];for(let e=0;e<J.length;e+=1)X[e]=lt(ot(t,J,e));const U=t=>F(X[t],1,1,()=>{X[t]=null});return{c(){e=h("main"),s=h("div"),n=h("div"),r=h("div"),o=h("div"),o.textContent="Running",i=f(),u=h("div"),u.textContent="Waiting",p=f(),g=h("div"),g.textContent="Blocked",v=f(),w=h("div"),w.textContent="Suspended",A=f(),T=h("div"),T.textContent="Parked",E=f(),b=h("div"),b.textContent="Zombie",$=f(),P(D.$$.fragment),L=f(),O=h("div"),S=h("div"),C=h("div"),K=f();for(let t=0;t<W.length;t+=1)W[t].c();R=f();for(let t=0;t<X.length;t+=1)X[t].c();m(o,"class","R svelte-1sw8vp4"),m(u,"class","CW svelte-1sw8vp4"),m(g,"class","B svelte-1sw8vp4"),m(w,"class","S svelte-1sw8vp4"),m(T,"class","P svelte-1sw8vp4"),m(b,"class","Z svelte-1sw8vp4"),m(r,"class",y="state "+(t[3]?"":"flex-container")+" svelte-1sw8vp4"),m(n,"class","sidebar svelte-1sw8vp4"),m(C,"class","flex-child svelte-1sw8vp4"),x(C,"width",t[1]+"px"),m(S,"class","fileNames flex-container svelte-1sw8vp4"),m(O,"class","main svelte-1sw8vp4"),m(s,"class",M="flex-container "+(t[3]?"filesloaded":"")+" svelte-1sw8vp4")},m(l,d){a(l,e,d),c(e,s),c(s,n),c(n,r),c(r,o),c(r,i),c(r,u),c(r,p),c(r,g),c(r,v),c(r,w),c(r,A),c(r,T),c(r,E),c(r,b),c(n,$),H(D,n,null),c(s,L),c(s,O),c(O,S),c(S,C),c(S,K);for(let t=0;t<W.length;t+=1)W[t].m(S,null);c(O,R);for(let t=0;t<X.length;t+=1)X[t].m(O,null);t[7](O),k=!0},p(t,[e]){if((!k||8&e&&y!==(y="state "+(t[3]?"":"flex-container")+" svelte-1sw8vp4"))&&m(r,"class",y),(!k||2&e)&&x(C,"width",t[1]+"px"),6&e){let s;for(B=t[2],s=0;s<B.length;s+=1){const n=it(t,B,s);W[s]?W[s].p(n,e):(W[s]=ct(n),W[s].c(),W[s].m(S,null))}for(;s<W.length;s+=1)W[s].d(1);W.length=B.length}if(54&e){let s;for(J=t[4],s=0;s<J.length;s+=1){const n=ot(t,J,s);X[s]?(X[s].p(n,e),_(X[s],1)):(X[s]=lt(n),X[s].c(),_(X[s],1),X[s].m(O,null))}for(N(),s=J.length;s<X.length;s+=1)U(s);I()}(!k||8&e&&M!==(M="flex-container "+(t[3]?"filesloaded":"")+" svelte-1sw8vp4"))&&m(s,"class",M)},i(t){if(!k){_(D.$$.fragment,t);for(let t=0;t<J.length;t+=1)_(X[t]);k=!0}},o(t){F(D.$$.fragment,t),X=X.filter(Boolean);for(let t=0;t<X.length;t+=1)F(X[t]);k=!1},d(s){s&&l(e),j(D),d(W,s),d(X,s),t[7](null)}}}function ht(t,e,s){let n,r;i(t,Q,t=>s(8,n=t)),i(t,nt,t=>s(9,r=t));let{services:o}=e;var c,a;c="services",a=o,T().$$.context.set(c,a);let l,d,h=(t,e)=>{let s=Math.min(t.length,e.length),n=t.padEnd(0,s-1),r=e.slice(0,s-1),o=n.localeCompare(r);return 0==o?t.length!=e.length?t.length-e.length:t.localeCompare(e):o},u=()=>{s(1,d=Math.floor(l.getBoundingClientRect().width/(p.length+1)))};var f;let p,g,m,v;return f=()=>{u()},T().$$.on_mount.push(f),function(t){T().$$.after_update.push(t)}(()=>{u()}),window.onresize=u,t.$set=t=>{"services"in t&&s(6,o=t.services)},t.$$.update=()=>{256&t.$$.dirty&&s(2,p=n.map(t=>t.name).sort()),4&t.$$.dirty&&s(3,g=p&&p.length>0),512&t.$$.dirty&&s(4,m=Object.keys(Object.entries(r).reduce((t,[e,s])=>Object.assign({},t,s),{})).sort(h)),512&t.$$.dirty&&s(10,v=r)},[l,d,p,g,m,(t,e)=>v[t]&&v[t][e]?v[t][e]:void 0,o,function(t){b[t?"unshift":"push"](()=>{l=t,s(0,l)})}]}class ut{constructor(t){this.name=t,this.subscribers=[]}process(){try{this.notify(...arguments)}catch(t){throw console.error(t),t}}notify(){this.subscribers.forEach(t=>t.process(...arguments))}subscribe(){this.subscribers=[...this.subscribers,...arguments]}}class ft extends ut{constructor(){super("LineProcessor"),this.textDecoder=new TextDecoder("utf-8"),this.dataArr=[]}process(t,e){this.dataArr=this.dataArr.concat(Array.from(e));let s=this.newLineIndex();for(;-1!=s;){let e=this.dataArr.splice(0,s+1);var n=this.textDecoder.decode(Uint8Array.from(e));this.notify(t,n),s=this.newLineIndex()}}newLineIndex(){return this.dataArr.findIndex(t=>10===t||13===t)}}const pt=["START_DEADLOCK","2LKDEADLOCKTHR","3LKDEADLOCKWTR","4LKDEADLOCKMON","4LKDEADLOCKOBJ","3LKDEADLOCKOWN","1LKDEADLOCK","1LKDEADLOCK"];class gt extends ut{constructor(){super("LockBuilder"),this.thread={},this.deadlockStarted=!1}process(t,{type:e,content:s}){"1LKDEADLOCK"===e&&(this.deadlockStarted=!0,console.log(this.name+" - DeadLock Start")),"1LKDEADLOCK"===e&&this.deadlockStarted&&(this.deadlockStarted=!1,console.log(this.name+" - DeadLock End"))}}const mt=["1LKDEADLOCK","0SECTION"],vt=["2LKMONINUSE","3LKMONOBJECT","3LKNOTIFYQ","3LKWAITNOTIFY","3LKWAITERQ","3LKWAITER","1LKREGMONDUMP","2LKREGMON","1LKMONPOOLDUMP","1LKREGMONDUMP",...mt];class xt extends ut{constructor(){super("LockMonitorBuilder"),this.thread={},this.lkMonitorsStarted=!1,this.regMonitorsStarted=!1}process(t,{type:e,content:s}){try{"1LKMONPOOLDUMP"===e&&(this.lkMonitorsStarted=!0,this.regMonitorsStarted=!1,console.log(this.name+" - Lock Monitors Start")),"1LKREGMONDUMP"===e&&(this.lkMonitorsStarted=!1,this.regMonitorsStarted=!0,console.log(this.name+" - Lock Monitors End"),console.log(this.name+" - Reg Monitors Start")),-1!==mt.indexOf(e)&&this.regMonitorsStarted&&(this.lkMonitorsStarted=!1,this.regMonitorsStarted=!1,console.log(this.name+" - Reg Monitors End"))}catch(t){console.error(t),this.close()}}close(){let t=super.close();return console.timeEnd("global"),t}}class wt{constructor({name:t,j9vmthread:e,j9thread:s,id:n,state:r,prio:o}){this.name=t,this.state=r,this.prio=o,this.j9vmthread=e,this.j9thread=s,this.id=n,this.stack=[],this.nativeStack=[]}addToStack(t){this.stack.push(t)}addToNativeStack(t){this.nativeStack.push(t)}addJavalThread(t){this.javalThreadIfo=t}addThreadInfo1(t){this.nativeInfo=t}}const At=/\"(?<name>.*?)\"[\s,]*(?<j9vmthread>.*?),[\s,]*(?<j9thread>.*?),[\s,]*(?<id>.*?),[\s,]*state:(?<state>.*),[\s,]*prio=(?<prio>[\d]*)/,Tt=/.*?ID:(?<threadId>.*?),.*?priority:(?<priority>.*?),.*?policy:(?<policy>.*?),.*?vmstate:(?<vmstate>.*?),.*?flags:(?<flags>.*?)\)/,Et=/\(.*getId:(?<getId>.*?),.*?isDaemon:(?<isDaemon>.*?)\)/,bt={THREADINFO:"3XMTHREADINFO",JAVALTHREAD:"3XMJAVALTHREAD",THREADINFO1:"3XMTHREADINFO1",STACKTRACE4:"4XESTACKTRACE",STACKTRACE5:"5XESTACKTRACE",NATIVESTACK:"4XENATIVESTACK",THREADBLOCK:"3XMTHREADBLOCK",START_THREADS:"1XMTHDINFO",END_THREADS:"0SECTION"},yt=Object.values(bt);class $t extends ut{constructor(){super("ThreadBuilder"),this.thread=void 0,this.started=!1}process(t,{type:e,content:s}){this.started&&this.buildThread(t,e,s),bt.START_THREADS===e&&(this.started=!0,console.log(this.name+" - Build Threads Start")),bt.END_THREADS===e&&this.started&&(this.started=!1,console.log(this.name+" - Build Threads End"))}buildThread(t,e,s){let n=void 0;switch(e){case bt.THREADINFO:if(n=At.exec(s),n){let{groups:e}=n;e&&e.name&&(this.thread=new wt(e),nt.addThread(t,this.thread))}else this.thread=new wt({name:s}),nt.addThread(t,this.thread);break;case bt.THREADINFO1:if(n=Tt.exec(s),n){let{groups:t}=n;this.thread.addThreadInfo1(t)}break;case bt.JAVALTHREAD:if(n=Et.exec(s),n){let{groups:t}=n;this.thread.addJavalThread(t)}break;case bt.STACKTRACE4:case bt.STACKTRACE5:this.thread.addToStack(s);break;case bt.NATIVESTACK:this.thread.addToNativeStack(s)}}}const Dt=/^(?<type>.*?)\s[\s]*(?<content>.*)/,Lt=[...yt,...vt,...pt];class Ot extends ut{constructor(){super("LineFilter")}process(t,e){try{let{groups:{type:s,content:n}}=Dt.exec(e);-1!==Lt.indexOf(s)&&this.notify(t,{type:s,content:n})}catch(t){console.error(t)}}}class St{list=[];listeners=[];addDeferred(t){this.list.push(t),this.notify()}addListener(t){this.listeners.push(t),this.notify()}notify(){if(this.listeners.length>0&&this.list.length>0){let t=this.list.shift();this.listeners.shift().execute(t),this.notify()}}}class Ct{constructor(t){this.file=t,this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Kt{constructor(t){this.queue=t,this.reader=new FileReader}async execute(t){this.reader.onload=e=>{t.resolve(e.target.result),this.queue.addListener(this)},this.reader.readAsArrayBuffer(t.file)}}class Rt{constructor(t){this.fileQueue=new St;for(let e=0;e<t;e++)this.fileQueue.addListener(new Kt(this.fileQueue))}async read(t){let e=new Ct(t);return this.fileQueue.addDeferred(e),e.promise}}Rt.getInstance=()=>(Rt.instance||(Rt.instance=new Rt(6)),Rt.instance);return new class extends J{constructor(t){super(),W(this,t,ht,dt,o,{services:6})}}({target:document.body,props:{services:{JCoreProcessor:new class{constructor(){Q.subscribe(t=>{this.process(t)})}async process(t){if(t&&t.length>0){this.processing&&console.log("cancel previous"),this.processing=!0;let e=t.map(async t=>await new Promise((e,s)=>t.file(e,s)));console.time("global"),Promise.all(e).then(t=>Promise.all(t.map(t=>this.processFile(t)))).then(()=>console.timeEnd("global"))}}async processFile(t){let e=new ft,s=new Ot,n=new $t,r=new gt,o=new xt;e.subscribe(s),s.subscribe(n,r,o);let i=t.stream();await i.pipeTo(new WritableStream({write:s=>{try{e.process(t,s)}catch(t){console.error(t)}},close:()=>{console.log("File stream closed")},Abort:()=>{}}))}},FileReadService:Rt.getInstance(6)}}})}();
//# sourceMappingURL=bundle.js.map
